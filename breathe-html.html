<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SISU - Breathing Visualization</title>
  
  <!-- 
  =========================================================
  SISU — Complete Breathing Visualization
  =========================================================
  
  DENSITY:     ███████░░░  [7/10]
  ENDURANCE:   ██████████  [10/10]  
  ABSTRACTION: ████████░░  [8/10]
  
  COLOR PHASE: Full Spectrum Experience
  
  Historical Context:
    Born from: HTML5 Canvas API, 2008
    Survived:  Flash, Silverlight, Java Applets
    Evolves:   Into pure web standards
  
  =========================================================
  -->
  
  <link rel="stylesheet" href="ombre.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Courier New', monospace;
      background: var(--sisu-void);
      color: var(--sisu-primary);
      overflow-x: hidden;
      transition: background-color 2s ease;
    }
    
    /* Header */
    header {
      text-align: center;
      padding: 2rem;
      background: linear-gradient(180deg, var(--sisu-void) 0%, var(--sisu-shadow) 100%);
      border-bottom: 1px solid var(--sisu-primary);
    }
    
    h1 {
      font-size: 3rem;
      background: linear-gradient(90deg, var(--sisu-whisper) 0%, var(--sisu-primary) 50%, var(--sisu-void) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 10s ease infinite;
    }
    
    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .subtitle {
      color: var(--sisu-peak);
      font-size: 0.9rem;
      margin-top: 0.5rem;
      opacity: 0.8;
    }
    
    /* Navigation */
    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1rem;
      background: var(--sisu-floor);
    }
    
    .nav-button {
      padding: 0.5rem 1.5rem;
      background: var(--sisu-shadow);
      color: var(--sisu-primary);
      border: 1px solid var(--sisu-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }
    
    .nav-button:hover {
      background: var(--sisu-primary);
      color: var(--sisu-void);
      box-shadow: 0 0 20px var(--sisu-primary);
    }
    
    /* Main container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    /* Section styling */
    .section {
      margin: 3rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, 
        rgba(5, 46, 22, 0.9) 0%, 
        rgba(22, 101, 52, 0.5) 100%);
      border: 1px solid var(--sisu-primary);
      position: relative;
      overflow: hidden;
    }
    
    .section::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: var(--sisu-gradient);
      z-index: -1;
      opacity: 0.3;
    }
    
    .section h2 {
      color: var(--sisu-peak);
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }
    
    /* Canvas containers */
    .canvas-container {
      position: relative;
      width: 100%;
      height: 400px;
      background: var(--sisu-void);
      border: 1px solid var(--sisu-primary);
      margin: 2rem 0;
    }
    
    canvas {
      width: 100%;
      height: 100%;
    }
    
    /* Timeline */
    #timeline {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2rem 0;
      overflow-x: auto;
    }
    
    .era-node {
      transition: all 0.5s ease;
      border-radius: 10px;
      position: relative;
    }
    
    .era-node:hover {
      transform: scale(1.1);
      box-shadow: 0 0 30px currentColor;
    }
    
    /* SVG Container */
    .svg-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .svg-container svg {
      width: 100%;
      height: auto;
    }
    
    /* Control panel */
    .controls {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--sisu-shadow);
      padding: 1rem;
      border: 1px solid var(--sisu-primary);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .control-button {
      padding: 0.5rem;
      background: var(--sisu-floor);
      color: var(--sisu-peak);
      border: 1px solid var(--sisu-peak);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.8rem;
    }
    
    .control-button:hover {
      background: var(--sisu-peak);
      color: var(--sisu-void);
    }
    
    /* Info panel */
    .info-panel {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(5, 46, 22, 0.9);
      padding: 0.5rem 1rem;
      border: 1px solid var(--sisu-primary);
      font-size: 0.8rem;
      color: var(--sisu-peak);
    }
    
    /* Loading screen */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--sisu-void);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fade-out 2s ease 2s forwards;
    }
    
    @keyframes fade-out {
      to {
        opacity: 0;
        pointer-events: none;
      }
    }
    
    .loading-text {
      font-size: 2rem;
      color: var(--sisu-primary);
      animation: breathe-green var(--breathe-cycle) ease-in-out infinite;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      .controls { bottom: 1rem; right: 1rem; }
      nav { flex-wrap: wrap; gap: 1rem; }
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div class="loading">
    <div class="loading-text">SISU LOADING...</div>
  </div>
  
  <!-- Header -->
  <header>
    <h1>SISU</h1>
    <div class="subtitle">70 YEARS OF COMPUTING · COMPRESSED · BREATHING</div>
  </header>
  
  <!-- Navigation -->
  <nav>
    <button class="nav-button" onclick="startBreathing()">BREATHE</button>
    <button class="nav-button" onclick="startCompression()">COMPRESS</button>
    <button class="nav-button" onclick="startMatrix()">MATRIX</button>
    <button class="nav-button" onclick="cycleEras()">TIMELINE</button>
  </nav>
  
  <div class="container">
    <!-- Timeline Section -->
    <section class="section">
      <h2>Timeline Morphing</h2>
      <p style="color: var(--sisu-peak); margin-bottom: 1rem;">
        Click any era to transition. Watch the colors morph through 70 years of computing history.
      </p>
      <div id="timeline"></div>
    </section>
    
    <!-- Compression Visualization -->
    <section class="section">
      <h2>Compression Visualization</h2>
      <p style="color: var(--sisu-peak); margin-bottom: 1rem;">
        Watch 1000 particles compress toward the void. This is how code evolves toward essence.
      </p>
      <div class="canvas-container">
        <canvas id="compression-canvas"></canvas>
        <div class="info-panel">
          <div>Particles: <span id="particle-count">1000</span></div>
          <div>Compression: <span id="compression-ratio">1:1</span></div>
        </div>
      </div>
    </section>
    
    <!-- Matrix Rain -->
    <section class="section">
      <h2>Sisu Matrix</h2>
      <p style="color: var(--sisu-peak); margin-bottom: 1rem;">
        Binary rain in the full green spectrum. Every drop is a bit returning to void.
      </p>
      <div class="canvas-container">
        <canvas id="matrix-canvas"></canvas>
      </div>
    </section>
    
    <!-- Sacred Geometry -->
    <section class="section">
      <h2>Sacred Geometry</h2>
      <p style="color: var(--sisu-peak); margin-bottom: 1rem;">
        The eternal shapes of computation. Geometry that has survived since Euclid.
      </p>
      <div class="svg-container">
        <!-- Inline SVG for better integration -->
        <object data="geometry.svg" type="image/svg+xml" width="100%" height="100%">
          <!-- Fallback -->
          <img src="geometry.svg" alt="Sacred Geometry of Silicon">
        </object>
      </div>
    </section>
    
    <!-- Green Matrix Display -->
    <section class="section">
      <h2>The Sacred Green Matrix</h2>
      <p style="color: var(--sisu-peak); margin-bottom: 1rem;">
        21 greens arranged in sacred formation. Meditate on the compression.
      </p>
      <div class="green-matrix" style="margin: 2rem auto;">
        <!-- Matrix cells will be generated by JavaScript -->
      </div>
    </section>
  </div>
  
  <!-- Control Panel -->
  <div class="controls">
    <button class="control-button" onclick="toggleAnimation()">PAUSE/PLAY</button>
    <button class="control-button" onclick="changeMode('green')">GREEN MODE</button>
    <button class="control-button" onclick="changeMode('aquatic')">AQUATIC MODE</button>
    <button class="control-button" onclick="resetAll()">RESET</button>
  </div>
  
  <!-- Load transitions.js -->
  <script src="transitions.js"></script>
  
  <script>
    // Initialize on load
    window.addEventListener('load', () => {
      // Canvas setup
      const compressionCanvas = document.getElementById('compression-canvas');
      const matrixCanvas = document.getElementById('matrix-canvas');
      
      if (compressionCanvas) {
        compressionCanvas.width = compressionCanvas.offsetWidth;
        compressionCanvas.height = compressionCanvas.offsetHeight;
      }
      
      if (matrixCanvas) {
        matrixCanvas.width = matrixCanvas.offsetWidth;
        matrixCanvas.height = matrixCanvas.offsetHeight;
      }
      
      // Generate green matrix
      generateGreenMatrix();
    });
    
    // Generate the sacred green matrix
    function generateGreenMatrix() {
      const matrix = document.querySelector('.green-matrix');
      if (!matrix) return;
      
      const greens = Object.values(SISU_SPECTRUM).slice(0, 21);
      
      greens.forEach((color, i) => {
        const cell = document.createElement('div');
        cell.className = 'matrix-cell';
        cell.style.backgroundColor = color;
        cell.style.width = '50px';
        cell.style.height = '50px';
        cell.style.display = 'inline-block';
        cell.style.margin = '2px';
        cell.style.transition = 'all 0.3s ease';
        cell.style.cursor = 'pointer';
        
        cell.addEventListener('mouseenter', () => {
          cell.style.transform = 'scale(1.2)';
          cell.style.boxShadow = `0 0 20px ${color}`;
        });
        
        cell.addEventListener('mouseleave', () => {
          cell.style.transform = 'scale(1)';
          cell.style.boxShadow = 'none';
        });
        
        cell.addEventListener('click', () => {
          document.body.style.backgroundColor = color;
        });
        
        matrix.appendChild(cell);
      });
    }
    
    // Control functions
    let animationPaused = false;
    
    function toggleAnimation() {
      animationPaused = !animationPaused;
      // Implementation would pause all animations
    }
    
    function changeMode(mode) {
      if (mode === 'green') {
        document.body.style.background = `linear-gradient(180deg, ${SISU_SPECTRUM.whisper} 0%, ${SISU_SPECTRUM.void} 100%)`;
      } else if (mode === 'aquatic') {
        document.body.style.background = `linear-gradient(180deg, ${SISU_SPECTRUM.mintcream} 0%, ${SISU_SPECTRUM.teal} 100%)`;
      }
    }
    
    function resetAll() {
      location.reload();
    }
    
    function startBreathing() {
      if (typeof breathe === 'function') {
        breathe(document.body, SISU_SPECTRUM.whisper, SISU_SPECTRUM.void);
      }
    }
    
    function startCompression() {
      const canvas = document.getElementById('compression-canvas');
      if (canvas && typeof CompressionVisualizer !== 'undefined') {
        const compressor = new CompressionVisualizer(canvas);
        compressor.animate();
      }
    }
    
    function startMatrix() {
      const canvas = document.getElementById('matrix-canvas');
      if (canvas && typeof SisuMatrix !== 'undefined') {
        const matrix = new SisuMatrix(canvas);
        matrix.animate();
      }
    }
    
    function cycleEras() {
      const timeline = document.getElementById('timeline');
      if (timeline && typeof Timeline !== 'undefined') {
        const tl = new Timeline(timeline);
        tl.render();
        tl.autoPlay();
      }
    }
    
    // Update compression ratio display
    setInterval(() => {
      const ratio = document.getElementById('compression-ratio');
      if (ratio) {
        const currentRatio = (Math.random() * 100).toFixed(1);
        ratio.textContent = `${currentRatio}:1`;
      }
    }, 1000);
  </script>
</body>
</html>